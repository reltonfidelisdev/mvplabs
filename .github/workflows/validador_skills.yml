name: üèÜ Recife Labs - Validador de Entrada

on:
  pull_request:
    types: [closed]

jobs:
  validar-primeiro-passo:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - name: Checkout do C√≥digo
        uses: actions/checkout@v4

      - name: Validar e Atribuir Selos de Entrada
        run: |
          # Captura o autor do PR
          ALUNO="${{ github.event.pull_request.user.login }}"
          
          # Verifica se o arquivo talentos.json foi alterado
          # (Isso prova que ele sabe alterar JSON)
          CHANGED_FILES=$(git diff --name-only ${{ github.event.before }} ${{ github.event.after }})
          
          echo "Processando conquista para: $ALUNO"
          
          # Se o PR foi mergeado, ele j√° provou que sabe GitHub, PR e Commit.
          # Se alterou o JSON, validamos a quarta skill.
          
          echo "::notice title=CONQUISTA DESBLOQUEADA!::Parab√©ns $ALUNO! Voc√™ provou profici√™ncia em: {github, issues, commit, json}."
          echo "Selo: üèÖ Integrante Recife Labs validado."